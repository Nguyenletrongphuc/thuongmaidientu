<!DOCTYPE html>
<html lang="vn">
<head>
    <title>Sách Ơi - Home</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="asset/donhang.css">
    <link rel="stylesheet" type="text/css" href="asset/main.css">
    <link href="https://fonts.googleapis.com/css2?family=Lobster&family=Dancing Script:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="asset/img/themify-icons-font/themify-icons/themify-icons.css">
    <script src="asset/dongbodangnhap.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="grid">
                <nav class="header__navbar ">
                    <ul class="header__nav-list">
                        <li class="header__nav-item phancach">Vào cửa hàng trên ứng dụng</li>
                        <li class="header__nav-item">Kết nối
                            <a href="https://facebook.com" class="nav-item__icon">
                                <i class="ti-facebook"></i>
                            </a>
                            <a href="https://instagram.com" class="nav-item__icon">
                                <i class="ti-instagram"></i>
                            </a>
                        </li>
                        <li class="header__nav-item hearder__thongbao__hien">
                            <a href="" class="nav-item__icon">
                                <i class="ti-bell"></i>
                                Thông báo
                            </a>
                            <div class="hearder_thongbao">
                                <header class="hearder_thongbao-head">
                                    <h3>Thông Báo Mới</h3>
                                </header>
                                <ul class="hearder_thongbao_list">
                                    <li class="hearder_thongbao_list_item">
                                        <a href="" class="hearder_thongbao_link">
                                            <img src="https://ischool.vn/wp-content/uploads/2022/12/nhung-cuon-sach-hay-cho-tre-10-tuoi-3.jpg" alt="">
                                        <div class="hearder_thongbao_info">
                                            <p class="hearder_thongbao_name">Sách trẻ em</p>
                                            <p class="hearder_thongbao_mota">Phù hợp cho tuổi 5-10</p>
                                        </div>
                                        </a>
                                    </li>
                                </ul>
                                <footer class="hearder_thongbao-footer">
                                    <a href="" class="hearder_thongbao-footer-btn">Xem tất cả</a>
                                </footer>
                            </div>
                        </li>
                        <li class="header__nav-item">
                            <a href="" class="nav-item__icon">
                                <i class="ti-help-alt"></i>
                                Trợ giúp
                            </a>
                        </li>
                        <li class="header__nav-item">
                            <a href="admin2084.html" id="adminLink" class="go-admin">Admin</a>
                        </li>

                    </ul>
                    <ul class="header__nav-list">
                        <li class="header__nav_user_btn">
                            <button class="signup custom-btn btn-9">
                             <a href="signup.html">Đăng Nhập/Đăng Ký</a>
                            </button>
                        </li>
                    </ul>
                </nav>
            </div>
            <!-- phan tim kiem -->
            <div class="grid__timkiem">
                <div class="header__logo">
                    <a href="index.html" class="header__logo-link">
                        <img src="asset/img/logo-removebg-preview.png" alt="" class="header__logo-img">
                    </a>
                </div>
                <form id="searchForm" class="header__search">
                    <input type="text" id="searchInput" class="header__search-input" placeholder="Tìm kiếm sản phẩm">
                    <button type="submit" class="header__search-btn">
                        <i class="ti-search"></i>
                    </button>
                </form>
                <div class="header__cart">
                    <a href="giohang.html " class="header__cart-link">
                        <i class="ti-shopping-cart"></i>
                    </a>
                    <div class="header__cart_list header__cart_list__none ">
                        <img src="https://lucaga.com/assets/images/no-cart.png" alt="no__cart" class="no__cart__img">
                    </div>
                    
                </div>
                
        </header>
        <div class="content">
            <div class="order-list-container">
                <h2 class="order-list-title">Danh Sách Đơn Hàng</h2>
                <div class="order-list">
                    
                </div>
            </div>
        </div>
        <div class="footer">
           <div class="footer-container">
            <div class="footer-col">
                <h3 class="footer-title">Sách Ơi - Kết nối tri thức</h3>
                <p class="footer-desc">Nền tảng thương mại điện tử sách hàng đầu, mang đến cho bạn trải nghiệm mua sắm tiện lợi, đa dạng và an toàn.</p>
                <div class="footer-social">
                    <a href="https://facebook.com" target="_blank" class="footer-social-link"><i class="ti-facebook"></i></a>
                    <a href="https://instagram.com" target="_blank" class="footer-social-link"><i class="ti-instagram"></i></a>
                    <a href="mailto:sachoi@email.com" class="footer-social-link"><i class="ti-email"></i></a>
                </div>
            </div>
            <div class="footer-col">
                <h3>Liên hệ</h3>
                <ul class="footer-contact">
                    <li><i class="ti-location-pin"></i> 123 Đường Sách, Quận 1, TP.HCM</li>
                    <li><i class="ti-mobile"></i> 0334 321 797</li>
                    <li><i class="ti-email"></i> sachoi@email.com</li>
                </ul>
            </div>
            <div class="footer-col">
                <h3>Về chúng tôi</h3>
                <ul class="footer-links">
                    <li><a href="#">Giới thiệu</a></li>
                    <li><a href="#">Điều khoản sử dụng</a></li>
                    <li><a href="#">Chính sách bảo mật</a></li>
                    <li><a href="#">Hỗ trợ khách hàng</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h3>Đăng ký nhận tin</h3>
                <form class="footer-newsletter" onsubmit="event.preventDefault();alert('Cảm ơn bạn đã đăng ký!');">
                    <input type="email" placeholder="Nhập email của bạn" required>
                    <button type="submit"><i class="ti-arrow-right"></i></button>
                </form>
                <p class="footer-copyright">&copy; 2025 Sách Ơi. All rights reserved.</p>
            </div>
        </div>
        </div>
    </div>
  
    
     <script>
        window.addEventListener("DOMContentLoaded", function () {
          document.getElementById("searchForm").addEventListener("submit", function(e) {
            e.preventDefault();
            const query = document.getElementById("searchInput").value.trim();
            if (query) {
              window.location.href = `timkiem.html?query=${encodeURIComponent(query)}`;
            }
          });
        });
        </script>
    <script>
        function goToProductDetail(id) {
            window.location.href = `chitietsanpham.html?id=${id}`;
        }
        </script>
    <script>
        document.addEventListener("DOMContentLoaded", async () => {
          const orderListContainer = document.querySelector(".order-list");
          const token = localStorage.getItem("token"); // Giả sử bạn đã lưu JWT sau khi đăng nhập
        
          if (!token) {
            orderListContainer.innerHTML = "<p>Vui lòng đăng nhập để xem đơn hàng.</p>";
            return;
          }
        
          try {
            const response = await fetch("http://localhost:5000/api/orders/my-orders", {
              headers: {
                "Authorization": `Bearer ${token}`
              }
            });
        
            if (!response.ok) throw new Error("Không thể lấy đơn hàng!");
        
            const orders = await response.json();
            if (!orders.length) {
              orderListContainer.innerHTML = "<p>Bạn chưa có đơn hàng nào.</p>";
              return;
            }
        
            // Xóa đơn hàng mẫu
            orderListContainer.innerHTML = "";
        
            orders.forEach(order => {
              const orderDate = new Date(order.createdAt).toLocaleDateString("vi-VN");
        
              const productsHTML = order.items.map(item => `
                <li class="product-item">
                  <img src="${item.product.image}" alt="${item.product.name}" class="product-image">
                  <div class="product-info">
                    <span class="product-name">${item.product.name}</span>
                    <span class="product-quantity">Số lượng: ${item.quantity}</span>
                    <span class="product-price">Giá: ${item.product.price.toLocaleString()} ₫</span>
                  </div>
                </li>
              `).join("");
        
              const orderHTML = `
                <div class="order-item">
                  <div class="order-header">
                    <div class="order-id">Mã đơn hàng: <span>#${order._id}</span></div>
                    <div class="order-date">Ngày đặt: <span>${orderDate}</span></div>
                    <div class="order-status">Trạng thái: <span class="status-pending">${order.trangThaiGiaoHang}</span></div>
                    <div class="order-payment">Thanh toán: <span class="status-payment">${order.trangThaiThanhToan}</span></div>
                  </div>
                  <div class="order-products">
                    <h4>Sản phẩm:</h4>
                    <ul class="product-list">${productsHTML}</ul>
                  </div>
                  <div class="order-footer">
                    <div class="order-total">Tổng tiền: <span>${order.totalAmount.toLocaleString()} ₫</span></div>
                  </div>
                </div>
              `;
        
              orderListContainer.insertAdjacentHTML("beforeend", orderHTML);
            });
        
          } catch (error) {
            console.error("Lỗi khi tải đơn hàng:", error);
            orderListContainer.innerHTML = "<p>Đã xảy ra lỗi khi tải đơn hàng.</p>";
          }
        });
        </script>
        
</body>
</html>